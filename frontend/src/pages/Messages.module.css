/* Redesigned Messages Page Styles */

:root {
  --bg: #f7fafc;
  --card: #ffffff;
  --accent: #1e3a8a;
  --accent-variant: #0f172a;
  --accent-secondary: #f97316;
  --accent-success: #10b981;
  --incoming-bg: #f3f4f6;
  --outgoing-bg: linear-gradient(135deg,#1e3a8a,#0f3d91);
  --muted: #6b7280;
  --border: #e5e7eb;
  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 18px;
  --shadow-soft: 0 2px 4px rgba(30,58,138,0.08);
  --shadow-hover: 0 4px 10px rgba(30,58,138,0.15);
  --gradient-header: linear-gradient(120deg,#1e3a8a 0%,#2d4fa3 40%,#3b82f6 100%);
}

.container { padding: 1.5rem 2rem; max-width: 1280px; margin: 0 auto; display: flex; flex-direction: column; gap: 1rem; }
.layout { display: grid; grid-template-columns: 340px 1fr; gap: 20px; height: calc(100vh - 140px); }
.layout.collapsed { grid-template-columns: 1fr; }

/* Sidebar */
.sidebarShell { display:flex; flex-direction:column; background: var(--card); border:1px solid var(--border); border-radius: var(--radius-lg); box-shadow: var(--shadow-soft); overflow:hidden; }
.sidebarHeader { padding:14px 16px 10px; border-bottom:1px solid var(--border); background:#ffffffcc; backdrop-filter: blur(4px); }
.sidebarTitle { margin:0; font-size:.9rem; font-weight:600; letter-spacing:.5px; color:#1e3a8a; }
.searchBox { margin-top:8px; position:relative; }
.searchInput { width:100%; padding:.55rem .75rem .55rem 2.2rem; border:1px solid var(--border); border-radius: var(--radius-md); font-size:.85rem; }
.searchInput:focus { outline:2px solid #1e3a8a33; }
.searchIcon { position:absolute; left:.65rem; top:50%; transform:translateY(-50%); font-size:.85rem; color: var(--muted); }
.conversationList { flex:1 1 auto; overflow-y:auto; padding:6px 6px 10px; display:flex; flex-direction:column; gap:4px; }
.conversationItem { display:flex; gap:10px; align-items:center; padding:10px 12px; border-radius: var(--radius-md); cursor:pointer; position:relative; transition: background .15s ease, box-shadow .15s ease; }
.conversationItem:hover { background:#f1f5f9; }
.conversationItem.active { background:#e2e8f0; box-shadow: inset 0 0 0 1px #cbd5e1; }
.conversationAvatar { width:40px; height:40px; border-radius:50%; background:#e6eefc; display:flex; align-items:center; justify-content:center; font-weight:600; font-size:.75rem; letter-spacing:.5px; color:#1e3a8a; }
.conversationMeta { flex:1 1 auto; display:flex; flex-direction:column; gap:3px; }
.conversationName { font-size:.8rem; font-weight:600; color:#0f172a; }
.conversationPreview { font-size:.7rem; color:var(--muted); white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
.unreadDot { width:8px; height:8px; border-radius:50%; background: var(--accent-secondary); position:absolute; right:12px; top:50%; transform:translateY(-50%); box-shadow:0 0 0 2px #fff; }

/* Chat Shell */
.chatShell { display:flex; flex-direction:column; border:1px solid var(--border); background:var(--card); border-radius:var(--radius-lg); box-shadow: var(--shadow-soft); position:relative; overflow:hidden; }
.chatHeader { display:flex; align-items:center; justify-content:space-between; gap:14px; padding:14px 18px; background: var(--gradient-header); color:#fff; box-shadow:0 2px 4px rgba(0,0,0,0.08); }
.chatTitle { font-size:1.05rem; font-weight:600; letter-spacing:.5px; }
.chatSubtitle { font-size:.7rem; opacity:.85; }
.avatar { width:42px; height:42px; border-radius:50%; background: var(--accent-secondary); color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; box-shadow:0 2px 4px #f9731622; }
.presenceDot { width:10px; height:10px; border-radius:50%; background: var(--accent-success); box-shadow:0 0 0 4px #ffffff44; }

/* Messages */
.messagesViewport { flex:1 1 auto; padding:1.25rem 1.25rem 1rem; overflow-y:auto; display:flex; flex-direction:column; scroll-behavior:smooth; }
.messagesViewport::-webkit-scrollbar { width: 10px; }
.messagesViewport::-webkit-scrollbar-track { background: transparent; }
.messagesViewport::-webkit-scrollbar-thumb { background:#cbd5e1; border-radius:5px; }
.messagesViewport::-webkit-scrollbar-thumb:hover { background:#94a3b8; }
.dateSeparator { text-align:center; margin:22px auto 14px; position:relative; font-size:.65rem; font-weight:600; color:#475569; letter-spacing:.7px; }
.dateSeparator:before, .dateSeparator:after { content:""; position:absolute; top:50%; width:35%; height:1px; background:#e2e8f0; }
.dateSeparator:before { left:0; } .dateSeparator:after { right:0; }
.messageRow { display:flex; margin-bottom:8px; animation: fadeIn .3s ease; }
.messageOutgoing { justify-content:flex-end; }
.messageIncoming { justify-content:flex-start; }
.bubble { max-width:70%; padding:.7rem .95rem; border-radius: var(--radius-md); background: var(--incoming-bg); color:#111827; box-shadow:0 1px 2px rgba(0,0,0,0.04); position:relative; line-height:1.45; font-size:.95rem; backdrop-filter:blur(2px); }
.bubbleOutgoing { background: var(--outgoing-bg); color:#fff; border-bottom-right-radius:4px; }
.bubbleIncoming { background: var(--incoming-bg); border-bottom-left-radius:4px; }
.bubbleMeta { display:flex; align-items:center; gap:6px; font-size:11px; margin-top:6px; opacity:.7; }
.statusDot { width:8px; height:8px; border-radius:50%; background:var(--accent-secondary); }
.statusSending { background:var(--accent-secondary); animation:pulse 1.2s infinite; }
.statusError { background:#ef4444; }
.encryptedBadge { font-size:10px; padding:2px 6px; background:#1e3a8a10; border:1px solid #1e3a8a33; border-radius:12px; color:#1e3a8a; }
.typingIndicator { font-size:.7rem; color:#1e3a8a; display:flex; align-items:center; gap:6px; margin-top:4px; animation: fadeIn .3s ease; }
.typingDots { display:flex; gap:3px; }
.typingDots span { width:6px; height:6px; background:#1e3a8a; border-radius:50%; display:inline-block; animation:bounce .9s infinite; }
.typingDots span:nth-child(2){ animation-delay:.15s } .typingDots span:nth-child(3){ animation-delay:.3s }

/* Composer */
.composerShell { border-top:1px solid var(--border); background:#ffffffcc; backdrop-filter:blur(6px); padding:.85rem .9rem .95rem; display:flex; flex-direction:column; gap:.6rem; }
.composerRow { display:flex; gap:.6rem; }
.composerTextarea { flex:1 1 auto; resize:none; padding:.75rem .85rem; border:1px solid var(--border); border-radius: var(--radius-md); font-size:.95rem; font-family:inherit; line-height:1.4; }
.composerTextarea:focus { outline:2px solid #1e3a8a33; }
.composerActions { display:flex; gap:.5rem; align-items:center; }
.sendButton { background:var(--accent); color:#fff; border:none; padding:.65rem 1.1rem; border-radius: var(--radius-md); font-weight:600; cursor:pointer; display:flex; align-items:center; gap:6px; box-shadow: var(--shadow-soft); }
.sendButton:hover { box-shadow: var(--shadow-hover); }
.sendButton:disabled { opacity:.55; cursor:not-allowed; }
.attachButton { background: var(--incoming-bg); border:1px solid var(--border); padding:.55rem .9rem; border-radius: var(--radius-md); cursor:pointer; display:flex; align-items:center; gap:6px; font-size:.75rem; }
.attachButton:hover { background:#eef2f7; }
.errorBanner { font-size:.8rem; color:#b91c1c; background:#fef2f2; padding:4px 8px; border-radius: var(--radius-sm); border:1px solid #fecaca; }

/* Animations */
@keyframes pulse { 0% { transform:scale(1); opacity:.9 } 50% { transform:scale(1.5); opacity:.4 } 100% { transform:scale(1); opacity:.9 } }
@keyframes fadeIn { from { opacity:0; transform: translateY(4px) } to { opacity:1; transform: translateY(0) } }
@keyframes bounce { 0%,80%,100% { transform:scale(.7); opacity:.4 } 40% { transform:scale(1); opacity:1 } }

/* Responsive */
@media (max-width: 1024px){ .layout { grid-template-columns:300px 1fr; } }
@media (max-width: 820px){ .layout { grid-template-columns:1fr; height:auto; } .sidebarShell { order:2 } .chatShell { order:1; min-height:60vh } }
@media (max-width: 520px){ .conversationAvatar { width:34px; height:34px; } .avatar { width:38px; height:38px; } .chatHeader { padding:12px 14px; } .composerTextarea { font-size:.85rem; } }

/* Legacy selectors (hidden now) */
.chatArea { display:none; }
.messagesList { display:none; }
.outgoing, .incoming { display:none; }
